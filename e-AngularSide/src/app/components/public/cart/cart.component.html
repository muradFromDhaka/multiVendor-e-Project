<div class="container mt-4" *ngIf="cart">

  <h3 class="mb-4">
    <i class="bi bi-cart3 me-2"></i>
    Shopping Cart
  </h3>

  <!-- Empty Cart -->
  <div *ngIf="cart.items.length === 0" class="alert alert-info">
    Your cart is empty.
  </div>

  <!-- Cart Table -->
  <div *ngIf="cart.items.length > 0" class="table-responsive">

    <table class="table align-middle">
      <thead class="table-dark">
        <tr>
          <th>Product</th>
          <th class="text-center">Price</th>
          <th class="text-center">Quantity</th>
          <th class="text-center">Total</th>
          <th class="text-center"></th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let item of cart.items">
          <td>{{ item.productName }}</td>
          <td class="text-center">
            {{ item.price | currency }}
          </td>

          <td class="text-center">
            <div class="btn-group">
              <button class="btn btn-sm btn-outline-secondary"
                      (click)="decreaseQty(item)">
                âˆ’
              </button>
              <span class="btn btn-sm btn-light">
                {{ item.quantity }}
              </span>
              <button class="btn btn-sm btn-outline-secondary"
                      (click)="increaseQty(item)">
                +
              </button>
            </div>
          </td>

          <td class="text-center fw-bold">
            {{ item.total | currency }}
          </td>

          <td class="text-center">
            <button class="btn btn-sm btn-danger"
                    (click)="removeItem(item)">
              <i class="bi bi-trash"></i>
            </button>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

  <!-- Summary -->
  <div *ngIf="cart.items.length > 0"
       class="d-flex justify-content-between align-items-center mt-4">

    <div>
      <strong>Total Items:</strong> {{ totalItems }} <br>
      <strong>Total Amount:</strong>
      <span class="fs-5">
        {{ cart.totalAmount | currency }}
      </span>
    </div>

    <div>
      <button class="btn btn-outline-danger me-2"
              (click)="clearCart()">
        Clear Cart
      </button>

      <button class="btn btn-success"
        [disabled]="isPlacingOrder"
        (click)="checkout()">
        {{ isPlacingOrder ? 'Placing Order...' : 'Checkout' }}
      </button>
    </div>

  </div>

</div>

